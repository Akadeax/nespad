{
	"version": "2.0.0",
	"tasks":
	[
		{
			"label": "Make NES file",
			"type": "shell",
			"command": "./build.bat",
			"problemMatcher": [],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"options": {
				"env": {
					"WORKSPACE_DIR": "${workspaceFolder}",
					"BUILD_DIR": "${config:NES.buildDir}",
					"SRC_DIR": "${config:NES.srcDir}",
					"MAIN": "${config:NES.main}",
					"CFG": "${config:NES.cfg}",
					"OUT_NAME": "${config:NES.outName}",
					"ENABLE_TESTS": "false"
				}
			}
		},
		{
			"label": "Make NES file (with tests)",
			"type": "shell",
			"command": "./build.bat",
			"problemMatcher": [],
			"group": {
				"kind": "build",
			},
			"options": {
				"env": {
					"WORKSPACE_DIR": "${workspaceFolder}",
					"BUILD_DIR": "${config:NES.buildDir}",
					"SRC_DIR": "${config:NES.srcDir}",
					"MAIN": "${config:NES.main}",
					"CFG": "${config:NES.cfg}",
					"OUT_NAME": "${config:NES.outName}",
					"ENABLE_TESTS": "true"
				}
			}
		},
		{
			"label": "Run Tests",
			"type": "shell",
			"command": "./scripts/tests/run_tests.bat",
			"problemMatcher": [],
			"group": {
				"kind": "test",
				"isDefault": true
			},
			"options": {
				"env": {
					"MESEN_PATH": "${config:NES.program}",
					"ROM_PATH": "${config:NES.romPath}"
				}
			},
			"dependsOn": [ "Make NES file (with tests)" ]
		}
	]
}
